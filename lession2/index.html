<!DOCTYPE html>
<html lang="ko">
<head>
<title>bsidesoft broadcast lession 2</title>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"/>
</head>
<body>
<canvas id="stage" width="500" height="500"></canvas>
<script>
var getId;
getId = (function(){
  var cache = {};
  return function(id){
    var el;
    return cache[id] || (el = document.getElementById(id)) && (cache[id] = el);
  };
})();
var context = getId('stage').getContext('2d');

var Display = function(){};
//override
Display.prototype._path = function(){
  throw '_path';
};
Display.prototype._command = [];
Display.prototype.makePath = function(context){
  var cmd, i, j;
  cmd = this._command;
  cmd.length = 0;
  this._path(cmd);
  i = 0, j = cmd.length;
  context.beginPath();
  while(i < j){
    context[cmd[i++]](cmd[i++], cmd[i++]);
  }
  context.closePath();
};
Display.prototype.stroke = function(context, r,g,b,a){
  this.makePath();
  context.strokeStyle = 'rgba(' + [r,g,b,a].join(',') + ')';
  context.stroke();
};
Display.prototype.fill = function(context, r,g,b,a){
  this.makePath();
  context.fillStyle = 'rgba(' + [r,g,b,a].join(',') + ')';
  context.fill();
};
var Box = function(x, y, w, h){
  this.x = x;
  this.y = y;
  this.width = w;
  this.height = h;
};
Box.prototype._path = function(command){
  command.push(
    'moveTo', this.x, this.y,
    'lineTo', this.x + this.width, this.y,
    'lineTo', this.x + this.width, this.y + this.height,
    'lineTo', this.x, this.y + this.height,
    'lineTo', this.x, this.y
  );
  return command;
}


var box1 = new Box(100,100, 20,20);
var box2 = new Box(300,300, 50,50);

//---------------------
box1.fill(context, 255,0,0,1);
box2.stroke(context, 0,0,255,1);
//---------------------
box1.x = 150;
box2.y = 150;
box1.fill(context, 0,255,0,1);
//---------------------
</script>
</body>
</html>
